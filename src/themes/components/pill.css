@layer components {
  i-pill,
  .i-pill {
    /* =========================================================
     * Base tokens (align with button style)
     * ========================================================= */
    --i-pill-font-family: var(--i-font-heading);
    --i-pill-gap: var(--i-gap-md);
    --i-pill-border-radius: var(--i-radius-full);

    /* pill padding is like button (0 y, px x) */
    --i-pill-padding: 0 var(--i-padding-md);

    --i-pill-height: var(--i-size-md);
    --i-pill-min-width: 0px;
    --i-pill-font-size: var(--i-text-md);

    --i-pill-border: var(--i-border);
    --i-pill-color: var(--i-text-color);
    --i-pill-background-color: var(--i-color-white);

    /* close button sizing relative to pill */
    --i-pill-close-size: calc(var(--i-pill-height) - 8px);
    --i-pill-close-font-size: var(--i-text-md);
    --i-pill-close-background-color: var(--i-color-primary);
    --i-pill-close-hover-background-color: var(--i-color-primary);
    --i-pill-close-position: translateY(0.01em);

    display: inline-flex;
    justify-content: center;
    align-items: center;
    gap: var(--i-pill-gap);

    border: var(--i-pill-border);
    border-radius: var(--i-pill-border-radius);
    background-color: var(--i-pill-background-color);

    padding: var(--i-pill-padding);
    min-width: var(--i-pill-min-width);
    height: var(--i-pill-height);

    color: var(--i-pill-color);
    font-size: var(--i-pill-font-size);
    font-family: var(--i-pill-font-family);
    user-select: none;
    text-decoration: none;
    white-space: nowrap;

    &[aria-disabled='true'] {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* =========================================================
     * Content
     * ========================================================= */
    .i-pill__content {
      --i-background-color: initial;
      display: inline-flex;
      align-items: center;
      min-width: 0;
    }

    /* =========================================================
     * Close button
     * ========================================================= */
    /* .i-pill__close {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      appearance: none;
      opacity: 0.8;

      cursor: pointer;
      margin: 0;
      border: none;
      border-radius: var(--i-radius-full);
      --i-background-color: var(--i-pill-close-background-color);
      padding: 0;

      width: var(--i-pill-close-size);
      height: var(--i-pill-close-size);
      color: var(--i-color-white);
      font-size: var(--i-pill-close-font-size);
      line-height: 1;

      &:hover {
        opacity: 1;
      }

      &:disabled {
        cursor: not-allowed;
      }
    } */
    .i-pill__close {
      display: inline-flex;
      position: relative;
      justify-content: center;
      align-items: center;
      border-radius: var(--i-radius-full);
      --i-background-color: var(--i-pill-close-background-color);
      cursor: pointer;

      padding: 0;
      width: var(--i-pill-close-size);
      height: var(--i-pill-close-size);
      overflow: hidden;

      font-size: 0;
      line-height: 0;
      &::before {
        transform: var(--i-pill-close-position);
        content: 'Ã—';
        color: var(--i-color-white);
        --i-background-color: transparent;
        font-size: var(--i-pill-close-font-size);
        line-height: 1;
      }

      &:hover {
        --i-background-color: var(--i-pill-close-hover-background-color);
      }
    }

    /* =========================================================
     * Sizes (match i-button sizing rules)
     * ========================================================= */

    &[size='2xs'],
    &.i-pill-2xs {
      --i-pill-gap: 0 var(--i-gap-xs);
      --i-pill-padding: 0 var(--i-padding-2xs);
      --i-pill-height: var(--i-size-2xs);
      --i-pill-min-width: var(--i-size-2xs);
      --i-pill-font-size: var(--i-text-2xs);
      --i-pill-close-size: calc(var(--i-pill-height) - 8px);
      --i-pill-close-font-size: var(--i-text-2xs);
      --i-pill-close-position: translate(0.02em, 0.04em);
    }

    &[size='xs'],
    &.i-pill-xs {
      --i-pill-gap: 0 var(--i-gap-sm);
      --i-pill-padding: 0 var(--i-padding-xs);
      --i-pill-height: var(--i-size-xs);
      --i-pill-min-width: var(--i-size-xs);
      --i-pill-font-size: var(--i-text-xs);
      --i-pill-close-size: calc(var(--i-pill-height) - 14px);
      --i-pill-close-font-size: var(--i-text-xs);
      --i-pill-close-position: translate(-0.0001em, 0.01em);
    }

    &[size='sm'],
    &.i-pill-sm {
      --i-pill-gap: 0 var(--i-gap-md);
      --i-pill-padding: 0 var(--i-padding-sm);
      --i-pill-height: var(--i-size-sm);
      --i-pill-min-width: var(--i-size-sm);
      --i-pill-font-size: var(--i-text-sm);
      --i-pill-close-size: calc(var(--i-pill-height) - 18px);
      --i-pill-close-font-size: var(--i-text-sm);
      --i-pill-close-position: translateY(0.025em);
    }

    &[size='md'],
    &.i-pill-md {
      --i-pill-gap: 0 var(--i-gap-lg);
      --i-pill-padding: 0 var(--i-padding-md);
      --i-pill-height: var(--i-size-md);
      --i-pill-min-width: var(--i-size-md);
      --i-pill-font-size: var(--i-text-md);
      --i-pill-close-size: calc(var(--i-pill-height) - 20px);
      --i-pill-close-font-size: var(--i-text-md);
      --i-pill-close-position: translate(0.01em, 0.03em);
    }

    &[size='lg'],
    &.i-pill-lg {
      --i-pill-gap: 0 var(--i-gap-xl);
      --i-pill-padding: 0 var(--i-padding-lg);
      --i-pill-height: var(--i-size-lg);
      --i-pill-min-width: var(--i-size-lg);
      --i-pill-font-size: var(--i-text-lg);
      --i-pill-close-size: calc(var(--i-pill-height) - 24px);
      --i-pill-close-font-size: var(--i-text-lg);
      --i-pill-close-position: translate(-0.003em, 0.025em);
    }

    /* =========================================================
     * Variants (attribute + class, same convention as button)
     * ========================================================= */

    &[variant='primary'],
    &.i-pill-primary {
      --i-pill-border: 1px solid var(--i-color-blue-200);
      --i-pill-color: var(--i-color-blue-700);
      --i-pill-background-color: var(--i-color-blue-50);
      --i-pill-close-background-color: var(--i-color-blue-700);
      --i-pill-close-hover-background-color: var(--i-color-blue-800);

      &[aria-disabled='true'] {
        --i-pill-border: 1px solid var(--i-color-blue-100);
        --i-pill-color: var(--i-color-blue-400);
        --i-pill-background-color: var(--i-color-blue-50);
        --i-pill-close-background-color: var(--i-color-blue-100);
      }
    }

    &[variant='warning'],
    &.i-pill-warning {
      --i-pill-border: 1px solid var(--i-color-amber-200);
      --i-pill-color: var(--i-color-amber-800);
      --i-pill-background-color: var(--i-color-amber-50);
      --i-pill-close-background-color: var(--i-color-amber-800);
      --i-pill-close-hover-background-color: var(--i-color-amber-900);

      &[aria-disabled='true'] {
        --i-pill-border: 1px solid var(--i-color-amber-100);
        --i-pill-color: var(--i-color-amber-400);
        --i-pill-background-color: var(--i-color-amber-50);
        --i-pill-close-background-color: var(--i-color-amber-100);
      }
    }

    &[variant='danger'],
    &.i-pill-danger {
      --i-pill-border: 1px solid var(--i-color-red-200);
      --i-pill-color: var(--i-color-red-700);
      --i-pill-background-color: var(--i-color-red-50);
      --i-pill-close-background-color: var(--i-color-red-700);
      --i-pill-close-hover-background-color: var(--i-color-red-800);

      &[aria-disabled='true'] {
        --i-pill-border: 1px solid var(--i-color-red-100);
        --i-pill-color: var(--i-color-red-400);
        --i-pill-background-color: var(--i-color-red-50);
        --i-pill-close-background-color: var(--i-color-red-100);
      }
    }

    &[variant='success'],
    &.i-pill-success {
      --i-pill-border: 1px solid var(--i-color-green-200);
      --i-pill-color: var(--i-color-green-700);
      --i-pill-background-color: var(--i-color-green-50);
      --i-pill-close-background-color: var(--i-color-green-700);
      --i-pill-close-hover-background-color: var(--i-color-green-800);

      &[aria-disabled='true'] {
        --i-pill-border: 1px solid var(--i-color-green-100);
        --i-pill-color: var(--i-color-green-400);
        --i-pill-background-color: var(--i-color-green-50);
        --i-pill-close-background-color: var(--i-color-green-100);
      }
    }

    /* subtle/outline-ish default */
    &[variant='default'],
    &.i-pill-default {
      --i-pill-border: var(--i-border);
      --i-pill-color: var(--i-text-color);
      --i-pill-background-color: var(--i-color-white);
      --i-pill-close-background-color: var(--i-color-gray-200);
      --i-pill-close-hover-background-color: var(--i-color-gray-300);
    }
  }
}
